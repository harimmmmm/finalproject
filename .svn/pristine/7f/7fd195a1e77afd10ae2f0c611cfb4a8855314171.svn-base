<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@ taglib uri="http://www.springframework.org/security/tags" prefix="sec" %>
<!-- **************** MAIN CONTENT START **************** -->
<main>


	<!-- =======================Page content START -->
	<section class="pt-0">
		<div class="container">
			<div style="margin-top: 50px; margin-bottom: 30px;">
				<div style="margin-bottom: 30px;">
					<h4 class="mb-3">기업 검색</h4>
				</div>
				<form class="row g-4">
					<!-- Search -->
					<div class="col-sm-6 col-lg-3">
						<div class="position-relative">
							<input class="form-control pe-5 bg-transparent" type="text"
								placeholder="기업명" aria-label="Search" name="searchEnt"
								id="searchEnt" value="${searchEnt}">
						</div>
					</div>

					<!-- Select option -->
					<div class="col-sm-6 col-lg-3">
						<select class="js-choice" name="searchJob" id="searchJob">
							<option value="">직무</option>
							<option value="server">서버</option>
							<option>프론트엔드</option>
							<option>백엔드</option>
							<option>응용소프트웨어</option>
							<option>시스템소프트웨어</option>
							<option>앱개발자</option>
							<option>크로스플랫폼 앱개발자</option>
							<option>게임 개발자</option>
							<option>DBA</option>
							<option>빅데이터 엔지니어</option>
							<option>인공지능/머신러닝</option>
							<option>devops/시스템 엔지니어</option>
							<option>HW/임베디드</option>
							<option>블록체인</option>
							<option>PM</option>
						</select>
					</div>

					<!-- Select option -->
					<div class="col-sm-6 col-lg-3">
						<select class="js-choice" name="serachLoc" id="serachLoc">
							<option value="">지역</option>
							<option value="daejeon">대전</option>
							<option>DB에서 불러오기</option>
						</select>
					</div>

					<!-- Button -->
					<div class="col-sm-6 col-lg-3">
						<a href="#" class="btn btn-primary-soft mb-0 w-100" type="submit">검색</a>
					</div>
				</form>
			</div>
			<hr>
			<br>
			<div class="row mt-3">
				<!-- Main content START -->
				<div class="col-12">
					<!-- Course Grid START -->
					<div class="row g-4">
						<c:set value="${pagingVO.dataList }" var="entList"/>
							<c:choose>
								<c:when test="${empty entList }">
									<h5>등록된 기업이 없습니다.</h5>
								</c:when>
								<c:otherwise>
									<c:forEach items="${entList }" var="ent">
										<!-- Card item START -->
										<div class="col-sm-6 col-lg-4 col-xl-3">
											<div class="card shadow-hover overflow-hidden h-60"
												style="border: 1px solid #d6d6d6; height: 280px;">
												<a href="" id="openModal" data-bs-toggle="modal"
													data-bs-target="#detailModal"> <br> <!-- Image -->
													<img
													src="${pageContext.request.contextPath }/resources/assets/images/sample/samsung.jpg"
													class="card-img-top" alt="course image"
													style="width: 100%; height: 100px;"> <!-- Card body -->
													<div class="card-body pb-0">
														<!-- Title -->
														<h5 class="card-title">${ent.entNm }</h5>
														<p style="color: black;">${ent.bizTypeNm } \ ${ent.ksicNm }</p>
													</div>
												</a>
												<!-- Card footer -->
												<div class="card-footer pt-0 pb-3"
													style="margin-bottom: 30px;">
													<hr>
													<div class="d-flex justify-content-between"
														style="width: 101px; margin-left: 165px;">
														<!-- Badge and favorite -->
														
														<input type="hidden" name="memId" id="memId" value="${ent.accountId }">
														<input type="hidden" name="entNo" id="entNo" value="${ent.entNo }">
														
														<c:if test="${!empty SessionInfo and !empty ent.accountId }">
														<div class="card card-body border p-1">
															<a href="#" class="h6 fw-light mb-0 likeEnt">
																<li class="list-inline-item me-0"><i
																	class="fas fa-star text-warning like"></i>&ensp;관심기업</li>
															</a>
														</div>
														</c:if>
														
														<c:if test="${empty SessionInfo or empty ent.accountId}">
														<div class="card card-body border p-1">
															<a href="#" class="h6 fw-light mb-0" id="dislikeEnt">
																<li class="list-inline-item me-0"><i
																	class="far fa-star dislike"></i>&ensp;관심기업</li>
															</a>
														</div>
														</c:if>

													</div>
												</div>
											</div>
										</div>
										<!-- Card item END -->
									</c:forEach>
								</c:otherwise>
							</c:choose>


					</div>
					<!-- Course Grid END -->

					<!-- Pagination START -->
					<div class="col-12">
						${pagingVO.pagingHTML }
					</div>
					<!-- Pagination END -->
				</div>
				<!-- Main content END -->
			</div>
			<!-- Row END -->
		</div>
	</section>
	<!-- =======================Page content END -->



</main>
<!-- **************** MAIN CONTENT END **************** -->

<!-- Personal information START -->
<div class="modal fade" id="detailModal" tabindex="-1"
	aria-labelledby="exampleModalLabel" aria-hidden="true">
	<div class="modal-dialog modal-xl">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="card-header-title mb-0">기업 정보</h5>
				<button type="button" class="btn-close" data-bs-dismiss="modal"
					aria-label="Close"></button>
			</div>
			<div class="modal-body">

				<div style="background-color: white;">
					<div class="card bg-transparent border rounded-3 h-100">


						<!-- Card body START -->
						<a href="/ent/detail.do">
							<div class="card-body">
								<img
									src="${pageContext.request.contextPath }/resources/assets/images/sample/samsung.jpg"
									class="card-img-top" alt="course image"
									style="width: 30%; height: 150px;">


								<!-- Information START -->
								<div class="row">

									<!-- Information item -->
									<div class="col-md-6">
										<table class="table table-borderless" style="width: 250%;">
											<br>
											<tr>
												<th>산업</th>
												<td>은행,금융</td>

												<th>사원수</th>
												<td>1000 명</td>
											</tr>
											<tr>
												<th>기업구분</th>
												<td>비영리단체,교육재단</td>

												<th>설립일</th>
												<td>1992.08.23</td>
											</tr>
											<tr>
												<th>자본금</th>
												<td>3,429억원</td>

												<th>매출액</th>
												<td>-</td>
											</tr>
											<tr>
												<th>대표자</th>
												<td>김영상</td>

												<th>대졸초임</th>
												<td>4,333 만원</td>
											</tr>
											<tr>
												<th>주요사업</th>
												<td>삼성전자(주)</td>

												<th>4대보험</th>
												<td>국민연금, 건강보험, 고용보험, 산재보험</td>
											</tr>
											<tr>
												<th>홈페이지</th>
												<td><a href="http://www.samsung.com">http://www.samsung.com</a></td>

												<th>주소</th>
												<td>대전</td>
											</tr>
										</table>
									</div>
								</div>
								<!-- Information END -->
							</div> <!-- Card body END -->
						</a>
					</div>
				</div>
				<!-- Personal information END -->

				<br>

				<!-- Card START -->
				<div style="background-color: white;">
					<div class="card border bg-transparent rounded-3">
						<!-- Card header START -->
						<div class="card-header bg-transparent border-bottom">
							<h3 class="mb-0">기업 게시판</h3>
						</div>
						<!-- Card header END -->

						<!-- Card body START -->
						<div class="card-body">

							<!-- Search and select START -->
							<div
								class="row g-3 align-items-center justify-content-between mb-4">
								<!-- Search -->
								<div class="col-md-8">
									<form class="rounded position-relative">
										<input class="form-control pe-5 bg-transparent" type="search"
											placeholder="Search" aria-label="Search">
										<button
											class="bg-transparent p-2 position-absolute top-50 end-0 translate-middle-y border-0 text-primary-hover text-reset"
											type="submit">
											<i class="fas fa-search fs-6 "></i>
										</button>
									</form>
								</div>

								<!-- Select option -->
								<div class="col-md-3">
									<!-- Short by filter -->
									<form>
										<select
											class="form-select js-choice border-0 z-index-9 bg-transparent"
											aria-label=".form-select-sm">
											<option value="">Sort by</option>
											<option>Free</option>
											<option>Newest</option>
											<option>Oldest</option>
										</select>
									</form>
								</div>
							</div>
							<!-- Search and select END -->

							<!-- Order list table START -->
							<div class="table-responsive border-0">
								<!-- Table START -->
								<table
									class="table table-dark-gray align-middle p-4 mb-0 table-hover">
									<!-- Table head -->
									<thead>
										<tr>
											<th scope="col" class="border-0 rounded-start">
												&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;제
												목</th>
											<th scope="col" class="border-0">작성자</th>
											<th scope="col" class="border-0">작성날짜</th>
											<th scope="col" class="border-0">조회수</th>
										</tr>
									</thead>

									<!-- Table body START -->
									<tbody>
										<!-- Table item -->
										<tr>
											<!-- Table data -->
											<td>
												<h6 class="table-responsive-title mt-2 mt-lg-0 mb-0">
													<a href="#">누르면 상세페이지</a>
												</h6>
											</td>

											<!-- Table data -->
											<td class="text-center text-sm-start text-primary-hover">
												<a href="#" class="text-body"><u>#125489</u></a>
											</td>

											<!-- Table data -->
											<td>18/1/2023</td>

											<!-- Table data -->
											<td class="bi bi-eye-fill">&nbsp;12</td>
										</tr>

										<!-- Table item -->
										<tr>
											<!-- Table data -->
											<td>
												<h6 class="table-responsive-title mt-2 mt-lg-0 mb-0">
													<a href="#">누르면 상세페이지</a>
												</h6>
											</td>
											<!-- Table data -->
											<td class="text-center text-sm-start text-primary-hover">
												<a href="#" class="text-body"><u>#235486</u></a>
											</td>

											<!-- Table data -->
											<td>25/1/2023</td>

											<!-- Table data -->
											<td class="bi bi-eye-fill">&nbsp;12</td>
										</tr>

										<!-- Table item -->
										<tr>
											<!-- Table data -->
											<td>
												<h6 class="table-responsive-title mt-2 mt-lg-0 mb-0">
													<a href="#">누르면 상세페이지</a>
												</h6>
											</td>
											<!-- Table data -->
											<td class="text-center text-sm-start text-primary-hover">
												<a href="#" class="text-body"><u>#0215789</u></a>
											</td>

											<!-- Table data -->
											<td>4/9/2020</td>

											<!-- Table data -->
											<td class="bi bi-eye-fill">&nbsp;12</td>
										</tr>

										<!-- Table item -->
										<tr>
											<!-- Table data -->
											<td>
												<h6 class="table-responsive-title mt-2 mt-lg-0 mb-0">
													<a href="#">누르면 상세페이지</a>
												</h6>
											</td>
											<!-- Table data -->
											<td class="text-center text-sm-start text-primary-hover">
												<a href="#" class="text-body"><u>#0135689</u></a>
											</td>

											<!-- Table data -->
											<td>5/1/2023</td>

											<!-- Table data -->
											<td class="bi bi-eye-fill">&nbsp;조회수</td>
										</tr>

										<!-- Table item -->
										<tr>
											<!-- Table data -->
											<td>
												<h6 class="table-responsive-title mt-2 mt-lg-0 mb-0">
													<a href="#">누르면 상세페이지</a>
												</h6>
											</td>
											<!-- Table data -->
											<td class="text-center text-sm-start text-primary-hover">
												<a href="#" class="text-body"><u>#0587623</u></a>
											</td>

											<!-- Table data -->
											<td>2/1/2023</td>

											<!-- Table data -->
											<td class="bi bi-eye-fill">&nbsp;12</td>

										</tr>
									</tbody>
									<!-- Table body END -->
								</table>
								<!-- Table END -->
							</div>
							<!-- Order list table END -->

							<!-- Pagination START -->
							<div
								class="d-sm-flex justify-content-sm-between align-items-sm-center mt-4 mt-sm-3">
								<!-- Content -->
								<p class="mb-0 text-center text-sm-start">Showing 1 to 8 of
									20 entries</p>
								<!-- Pagination -->
								<nav class="d-flex justify-content-center mb-0"
									aria-label="navigation">
									<ul
										class="pagination pagination-sm pagination-primary-soft d-inline-block d-md-flex rounded mb-0">
										<li class="page-item mb-0"><a class="page-link" href="#"
											tabindex="-1"><i class="fas fa-angle-left"></i></a></li>
										<li class="page-item mb-0"><a class="page-link" href="#">1</a></li>
										<li class="page-item mb-0 active"><a class="page-link"
											href="#">2</a></li>
										<li class="page-item mb-0"><a class="page-link" href="#">3</a></li>
										<li class="page-item mb-0"><a class="page-link" href="#"><i
												class="fas fa-angle-right"></i></a></li>
									</ul>
								</nav>
							</div>
							<!-- Pagination END -->
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<!-- Main content END -->

<script type="text/javascript">
$(function(){
	
	$(".likeEnt").click(function(e){
	    e.preventDefault();
	    
	    Swal.fire({
	        title: "관심 기업을 해지하시겠습니까?",
	        icon: "warning",
	        showCancelButton: true,
	        confirmButtonColor: '#3085d6',
	        cancelButtonColor: '#d33',
	        confirmButtonText: '확인',
	        cancelButtonText: '취소',
	        reverseButtons: true
	    }).then((result) => {
	        if(result.value) {
	            var memId = $("input[name='memId']").val();
	            var entNo = $("input[name='entNo']").val();
	            var data = {
	                accountId: memId,
	                entNo: entNo
	            }

	            $.ajax({
	                type: "post",
	                url: "/ent/likeEnt.do",
	                contentType: "application/json; charset=utf-8",
	                data: JSON.stringify(data),
	                beforeSend: function(xhr) {
	                    xhr.setRequestHeader(header, token);
	                },
	                success: function(res) {
	                    console.log("res >>>>>" + res);

	                    $(".like").removeClass("fas fa-star text-warning").addClass("far fa-star dislike");
	                    window.location.reload();
	                }
	            });
	        }
	    });
	});
		
		
	
	
});



</script>